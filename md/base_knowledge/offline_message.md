# 离线消息
离线消息是指当用户设备不在线，发送给该用户的消息被缓存到服务器，当设备上线后，消息再推送给用户。

火信会缓存每个用户1000条消息ID，因此如果用户有超过1000条消息没有接收，那么就只能收下来最后1000条消息，之前的消息将不会收取下来。

所有的消息都会储存下来，客户端有接口可以获取服务器端当前用户指定会话的某些消息唯一ID某些范围的消息。比如可以获取某个MessageUid之前的50条消息。

为了支持多端，消息收下来后服务器端也不会删除，因此应用卸载重装或者登陆新用户，可以收到最多1000条旧消息。多端也可以做到任意多的设备登陆收发消息。

为了防止离线消息数据包太大，因此必须注意减少消息的尺寸。图片消息内容或视频消息内容需要携带一张缩略图，缩略图的尺寸不能大于5K字节。大尺寸的消息内容要定义成媒体消息内容类型，先上传到媒体服务器，得到一个地址，再放到消息内容中。建议消息内容的大小不要大于5K。
