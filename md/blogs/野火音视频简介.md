# 野火音视频简介
音视频功能是社交应用最自然的需求了，因为除了消息，音视频通话也是一种常用的沟通方式，两种沟通方式相辅相承，如果社交软件只有其中一项功能那肯定就有些令人遗憾了。我们提供像野火的IM一样专业的音视频功能。

## 野火音视频的分类
野火音视频有3种，分别如下:

| 名称 | 功能特点 | 实现方案 | 媒体服务 | 通话质量 | 通话路数 | 使用费用 | 产品内容 | 产品价格 |
| ------ | ------ | ------ | ---- | ---- | ------- | ------- | ----- | ----- |
| 单人音视频SDK | 支持一对一音视频通话 | P2P | TURN服务 | 一般 | 一路 | 带宽需求较低，花费较低 | 客户端SDK | 免费 |
| 多人音视频SDK | 支持多人音视频通话 | Mesh | TURN服务 | 一般 | 最多视频4路，音频9路 | 带宽需求较低，花费较低 | 客户端SDK |  1W/套 |
| 音视频高级版 | 支持多人音视频通话/支持会议模式，支持服务器端录制 | SFU | STUN服务，野火音视频媒体服务 |  较好 | 视频可达9路以上，如果带宽足够可以支持更高 | 带宽需求较高，花费较高 | 客户端SDK和媒体服务 | 5.9W/套（另外需要专业版IM） |

## 单人音视频SDK
使用WebRTC提供的1对1通讯功能，不需要服务器参与，直接进行P2P通信（有穿墙打洞不成功的可能，在这种情况下需要使用TURN服务来支持通话）。功能实现比较简单，运营费用也比较低廉，但受限于通话双方网络情况，通话质量比较一般，也不支持多人通话。这个SDK适合对音视频功能需求极低的客户，仅作为IM的一个补充。

## 多人音视频SDK
由于WebRTC官方不提供多人通话功能，因此有多种多人通话的解决方案，多人音视频SDK使用的是其中最容易的一种方案，Mesh方案。在这种方案中，所有终端都与其它终端直接连接，形成网状结构。这种方案相对其它方案简单一些，使用成本也是最低的，但缺点就是太消耗终端的资源，手机的CPU和带宽消耗非常大，而且当用户较多时，很容易某些用户直接连接出现问题，因此通话的路数支持得很低，一般只能稳定支持4路视频，音频支持16路。由于技术还是单人音视频的技术，所以通话质量还是很一般，受限于多方网络状态，可能比单人音视频更容易出问题。这个SDK适合对多人音视频有一定的需求，但又对成本和价格敏感的客户。

## 音视频高级版
多人音视频技术除了Mesh方案外，还有MCU和SFU两种方案。MCU是移动互联网爆发之前流行的技术，所有客户端发送视频到服务器，服务器进行混流，组成一个组合的视频再发给所有端，是一种星形结构。由于需要视频混流，需要极高的计算算力，所以一般MCU的产品多是硬件产品，直接使用硬件编解码和混流，价格极高，现在逐渐被SFU方案代替。

SFU方案也需要媒体服务器，但区别在于媒体服务器仅做转发，这样对CPU消耗极低，每个客户端把视频发送到服务器，服务器再把视频转到所有其它参与者那里，这样每个客户端都会发出1路音视频，然后收到N-1路音视频。相比MCU方案，流量增加很多，但计算基本上不需要，所以成本更低效果也更好。相比与Mesh方案，由于流量是服务器提供的，所以通话质量非常有保障，效果非常好。支持的路数只跟服务器带宽有关，一般云服务器的带宽可达200Mbps，单台服务器可以支持250个一对一通话同时进行，或支持12场5人会议同时进行，或支持4场9人会议同时进行。一般按照流量计费比较划算，可以把带宽设置到最高，每个月的流量费用也不会太高。

野火音视频高级版就是采用的SFU方案，是基于[Janus](https://github.com/meetecho/janus-gateway)二次开发的。支持水平扩展能力，可以根据您的业务压力来扩展更大的服务能力。可以支持服务器端录制功能，另外也支持观察者模式，可以基于我们二次开发出类似与ZOOM那样的在线视频会议系统，可以支持多达100人的听众，对于很多普通企业应该是足够了。由于SFU对CPU的消耗非常低，所以可以使用低配的CPU就行，带宽按照流量计费也很便宜，一般云服务器流量的费用是0.8元/GB，所以运营的费用也不会太高，但会带来非常好的用户体验。野火音视频高级版适合对质量要求较高或者对价钱不敏感的用户。

## 最后
野火提供的音视频SDK使用同一套UI，所以如果您购买了多人音视频或音视频高级版，直接替换单人音视频SDK就可以。UI都是开源的，二次开发也都很容易。

另外多人音视频具有一定向下兼容单人音视频的能力。单人音视频的终端可以与多人音视频终端拨打1对1通话，因为他们本质技术是一样的，如果您早期使用单人音视频，也可以随时升级到多人音视频。音视频高级版使用的是完全不同的技术，如果其它版本升级到高级版，需要做强制升级，否则互通会有问题，所以如果您是高级版的目标客户，最好直接使用高级版，以免升级麻烦。
